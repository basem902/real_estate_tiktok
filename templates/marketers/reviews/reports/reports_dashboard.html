<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>لوحة تحكم التقارير | المسوقين العقاريين</title>
    <link rel="stylesheet" href="../../assets/css/bootstrap.rtl.min.css">
    <link rel="stylesheet" href="../../assets/css/all.min.css">
    <link rel="stylesheet" href="../styles/reports.css">
</head>
<body>
    <!-- شريط التنقل العلوي -->
    <div id="navbar-placeholder"></div>

    <div class="container-fluid my-4">
        <div class="row">
            <!-- القائمة الجانبية -->
            <div class="col-lg-2 mb-4">
                <div id="sidebar-placeholder"></div>
            </div>

            <!-- المحتوى الرئيسي -->
            <div class="col-lg-10">
                <div class="row">
                    <div class="col-12">
                        <div class="card shadow-sm mb-4">
                            <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
                                <h5 class="mb-0">لوحة تحكم التقارير</h5>
                                <div>
                                    <button class="btn btn-sm btn-light" id="refresh-data"><i class="fas fa-sync-alt"></i></button>
                                    <button class="btn btn-sm btn-light" id="report-settings"><i class="fas fa-cog"></i></button>
                                </div>
                            </div>
                            <div class="card-body">
                                <!-- ملخص التقارير والإحصائيات -->
                                <div class="row mb-4">
                                    <div class="col-md-3">
                                        <div class="card border-0 bg-light h-100">
                                            <div class="card-body text-center">
                                                <div class="d-flex justify-content-between align-items-center mb-3">
                                                    <h6 class="text-muted mb-0">إجمالي التقارير</h6>
                                                    <i class="fas fa-file-alt text-primary"></i>
                                                </div>
                                                <h3 class="mb-0" id="total-reports">15</h3>
                                                <div class="small text-success mt-2">
                                                    <i class="fas fa-arrow-up"></i> 8% منذ الشهر الماضي
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="card border-0 bg-light h-100">
                                            <div class="card-body text-center">
                                                <div class="d-flex justify-content-between align-items-center mb-3">
                                                    <h6 class="text-muted mb-0">التقارير الجديدة</h6>
                                                    <i class="fas fa-file-plus text-success"></i>
                                                </div>
                                                <h3 class="mb-0" id="new-reports">3</h3>
                                                <div class="small text-success mt-2">
                                                    <i class="fas fa-arrow-up"></i> 12% منذ الأسبوع الماضي
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="card border-0 bg-light h-100">
                                            <div class="card-body text-center">
                                                <div class="d-flex justify-content-between align-items-center mb-3">
                                                    <h6 class="text-muted mb-0">تقارير تم تصديرها</h6>
                                                    <i class="fas fa-file-export text-info"></i>
                                                </div>
                                                <h3 class="mb-0" id="exported-reports">7</h3>
                                                <div class="small text-success mt-2">
                                                    <i class="fas fa-arrow-up"></i> 5% زيادة
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="card border-0 bg-light h-100">
                                            <div class="card-body text-center">
                                                <div class="d-flex justify-content-between align-items-center mb-3">
                                                    <h6 class="text-muted mb-0">مؤشر الأداء</h6>
                                                    <i class="fas fa-chart-line text-warning"></i>
                                                </div>
                                                <h3 class="mb-0" id="performance-index">92%</h3>
                                                <div class="small text-success mt-2">
                                                    <i class="fas fa-arrow-up"></i> 3% تحسن
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- التقارير المجدولة والسريعة -->
                                <div class="row mb-4">
                                    <div class="col-md-6">
                                        <div class="card shadow-sm h-100">
                                            <div class="card-header bg-light">
                                                <h6 class="mb-0">التقارير المجدولة</h6>
                                            </div>
                                            <div class="card-body">
                                                <div class="list-group">
                                                    <a href="report_view.html" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                                                        <div>
                                                            <div class="fw-bold">تقرير أداء المبيعات الأسبوعي</div>
                                                            <div class="small text-muted">كل يوم أحد، الساعة 9:00 صباحاً</div>
                                                        </div>
                                                        <span class="badge bg-success rounded-pill">نشط</span>
                                                    </a>
                                                    <a href="report_view.html" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                                                        <div>
                                                            <div class="fw-bold">تقرير تقييمات العملاء الشهري</div>
                                                            <div class="small text-muted">أول كل شهر، الساعة 10:00 صباحاً</div>
                                                        </div>
                                                        <span class="badge bg-success rounded-pill">نشط</span>
                                                    </a>
                                                    <a href="report_view.html" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                                                        <div>
                                                            <div class="fw-bold">تقرير مقارنة الأداء الربع سنوي</div>
                                                            <div class="small text-muted">كل 3 أشهر، الساعة 8:00 صباحاً</div>
                                                        </div>
                                                        <span class="badge bg-secondary rounded-pill">متوقف</span>
                                                    </a>
                                                </div>
                                                <div class="text-center mt-3">
                                                    <button class="btn btn-sm btn-outline-primary"><i class="fas fa-plus"></i> إضافة تقرير مجدول</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="card shadow-sm h-100">
                                            <div class="card-header bg-light">
                                                <h6 class="mb-0">تقارير سريعة</h6>
                                            </div>
                                            <div class="card-body">
                                                <div class="row g-3">
                                                    <div class="col-md-6">
                                                        <a href="report_view.html" class="text-decoration-none">
                                                            <div class="card bg-light border-0 h-100 quick-report-card">
                                                                <div class="card-body text-center p-3">
                                                                    <i class="fas fa-star text-warning fs-3 mb-2"></i>
                                                                    <h6 class="mb-0">أداء التقييمات</h6>
                                                                </div>
                                                            </div>
                                                        </a>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <a href="report_view.html" class="text-decoration-none">
                                                            <div class="card bg-light border-0 h-100 quick-report-card">
                                                                <div class="card-body text-center p-3">
                                                                    <i class="fas fa-users text-primary fs-3 mb-2"></i>
                                                                    <h6 class="mb-0">رضا العملاء</h6>
                                                                </div>
                                                            </div>
                                                        </a>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <a href="report_view.html" class="text-decoration-none">
                                                            <div class="card bg-light border-0 h-100 quick-report-card">
                                                                <div class="card-body text-center p-3">
                                                                    <i class="fas fa-chart-bar text-success fs-3 mb-2"></i>
                                                                    <h6 class="mb-0">أداء المبيعات</h6>
                                                                </div>
                                                            </div>
                                                        </a>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <a href="report_view.html" class="text-decoration-none">
                                                            <div class="card bg-light border-0 h-100 quick-report-card">
                                                                <div class="card-body text-center p-3">
                                                                    <i class="fas fa-bullseye text-danger fs-3 mb-2"></i>
                                                                    <h6 class="mb-0">تحليل الأهداف</h6>
                                                                </div>
                                                            </div>
                                                        </a>
                                                    </div>
                                                </div>
                                                <div class="text-center mt-3">
                                                    <a href="report_generator.html" class="btn btn-sm btn-outline-primary"><i class="fas fa-plus"></i> إنشاء تقرير مخصص</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- التقارير الأخيرة -->
                                <div class="card shadow-sm">
                                    <div class="card-header bg-light d-flex justify-content-between align-items-center">
                                        <h6 class="mb-0">التقارير الأخيرة</h6>
                                        <div>
                                            <select class="form-select form-select-sm" id="sort-by" style="width: auto; display: inline-block;">
                                                <option value="date-desc">الأحدث أولاً</option>
                                                <option value="date-asc">الأقدم أولاً</option>
                                                <option value="name-asc">الاسم (تصاعدي)</option>
                                                <option value="name-desc">الاسم (تنازلي)</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="card-body p-0">
                                        <div class="table-responsive">
                                            <table class="table table-hover table-striped mb-0">
                                                <thead class="table-light">
                                                    <tr>
                                                        <th scope="col">اسم التقرير</th>
                                                        <th scope="col">النوع</th>
                                                        <th scope="col">تاريخ الإنشاء</th>
                                                        <th scope="col">حالة التقرير</th>
                                                        <th scope="col">المنشئ</th>
                                                        <th scope="col">إجراءات</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="reports-list">
                                                    <tr>
                                                        <td>
                                                            <div class="d-flex align-items-center">
                                                                <i class="fas fa-file-alt text-primary me-2"></i>
                                                                <div>تقرير أداء التقييمات الأسبوعي</div>
                                                            </div>
                                                        </td>
                                                        <td>تحليلي</td>
                                                        <td>28/03/2025</td>
                                                        <td>
                                                            <div class="d-flex">
                                                                <span class="badge bg-success">مكتمل</span>
                                                            </div>
                                                        </td>
                                                        <td>محمد أحمد</td>
                                                        <td>
                                                            <div class="btn-group" role="group">
                                                                <a href="report_view.html" class="btn btn-sm btn-outline-primary" data-bs-toggle="tooltip" title="عرض التقرير">
                                                                    <i class="fas fa-eye"></i>
                                                                </a>
                                                                <button class="btn btn-sm btn-outline-success"><i class="fas fa-download"></i></button>
                                                                <button class="btn btn-sm btn-outline-secondary"><i class="fas fa-share-alt"></i></button>
                                                                <button class="btn btn-sm btn-outline-danger"><i class="fas fa-trash"></i></button>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <div class="d-flex align-items-center">
                                                                <i class="fas fa-file-chart-line text-info me-2"></i>
                                                                <div>تقرير تحليل رضا العملاء</div>
                                                            </div>
                                                        </td>
                                                        <td>تحليلي</td>
                                                        <td>25/03/2025</td>
                                                        <td>
                                                            <div class="d-flex">
                                                                <span class="badge bg-success">مكتمل</span>
                                                            </div>
                                                        </td>
                                                        <td>سارة محمد</td>
                                                        <td>
                                                            <div class="btn-group" role="group">
                                                                <a href="report_view.html" class="btn btn-sm btn-outline-primary" data-bs-toggle="tooltip" title="عرض التقرير">
                                                                    <i class="fas fa-eye"></i>
                                                                </a>
                                                                <button class="btn btn-sm btn-outline-success"><i class="fas fa-download"></i></button>
                                                                <button class="btn btn-sm btn-outline-secondary"><i class="fas fa-share-alt"></i></button>
                                                                <button class="btn btn-sm btn-outline-danger"><i class="fas fa-trash"></i></button>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <div class="d-flex align-items-center">
                                                                <i class="fas fa-file-csv text-success me-2"></i>
                                                                <div>تصدير بيانات التقييمات الشهرية</div>
                                                            </div>
                                                        </td>
                                                        <td>تصديري</td>
                                                        <td>15/03/2025</td>
                                                        <td>
                                                            <div class="d-flex">
                                                                <span class="badge bg-success">مكتمل</span>
                                                            </div>
                                                        </td>
                                                        <td>أحمد محمود</td>
                                                        <td>
                                                            <div class="btn-group" role="group">
                                                                <a href="report_view.html" class="btn btn-sm btn-outline-primary" data-bs-toggle="tooltip" title="عرض التقرير">
                                                                    <i class="fas fa-eye"></i>
                                                                </a>
                                                                <button class="btn btn-sm btn-outline-success"><i class="fas fa-download"></i></button>
                                                                <button class="btn btn-sm btn-outline-secondary"><i class="fas fa-share-alt"></i></button>
                                                                <button class="btn btn-sm btn-outline-danger"><i class="fas fa-trash"></i></button>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <div class="d-flex align-items-center">
                                                                <i class="fas fa-file-pdf text-danger me-2"></i>
                                                                <div>تقرير مقارنة أداء المسوقين</div>
                                                            </div>
                                                        </td>
                                                        <td>مقارنة</td>
                                                        <td>10/03/2025</td>
                                                        <td>
                                                            <div class="d-flex">
                                                                <span class="badge bg-success">مكتمل</span>
                                                            </div>
                                                        </td>
                                                        <td>ليلى عمر</td>
                                                        <td>
                                                            <div class="btn-group" role="group">
                                                                <a href="report_view.html" class="btn btn-sm btn-outline-primary" data-bs-toggle="tooltip" title="عرض التقرير">
                                                                    <i class="fas fa-eye"></i>
                                                                </a>
                                                                <button class="btn btn-sm btn-outline-success"><i class="fas fa-download"></i></button>
                                                                <button class="btn btn-sm btn-outline-secondary"><i class="fas fa-share-alt"></i></button>
                                                                <button class="btn btn-sm btn-outline-danger"><i class="fas fa-trash"></i></button>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                        
                                        <!-- نظام التنقل بين صفحات التقارير -->
                                        <div class="d-flex justify-content-between align-items-center p-3 border-top">
                                            <div class="small text-muted">عرض 1-4 من أصل 15 تقرير</div>
                                            <nav aria-label="Page navigation">
                                                <ul class="pagination pagination-sm mb-0">
                                                    <li class="page-item disabled">
                                                        <a class="page-link" href="#" aria-label="Previous">
                                                            <span aria-hidden="true">&laquo;</span>
                                                        </a>
                                                    </li>
                                                    <li class="page-item active"><a class="page-link" href="#">1</a></li>
                                                    <li class="page-item"><a class="page-link" href="#">2</a></li>
                                                    <li class="page-item"><a class="page-link" href="#">3</a></li>
                                                    <li class="page-item">
                                                        <a class="page-link" href="#" aria-label="Next">
                                                            <span aria-hidden="true">&raquo;</span>
                                                        </a>
                                                    </li>
                                                </ul>
                                            </nav>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- تذييل الصفحة -->
    <div id="footer-placeholder"></div>

    <!-- تضمين النصوص البرمجية المشتركة -->
    <div id="scripts-placeholder"></div>

    <!-- نصوص مخصصة لصفحة لوحة تحكم التقارير -->
    <script>
        $(function() {
            // تحميل المكونات المشتركة
            $("#navbar-placeholder").load("../../includes/navbar.html");
            $("#sidebar-placeholder").load("../../includes/sidebar.html");
            $("#footer-placeholder").load("../../includes/footer.html");
            $("#scripts-placeholder").load("../../includes/scripts.html", function() {
                // تهيئة لوحة تحكم التقارير بعد تحميل النصوص البرمجية المشتركة
                initReportsDashboard();
            });
        });

        // تهيئة لوحة تحكم التقارير
        function initReportsDashboard() {
            console.log("تهيئة لوحة تحكم التقارير");
            
            // إعداد أحداث الأزرار
            setupButtonsEvents();
            
            // تحميل بيانات التقارير
            loadReportsData();
        }

        // إعداد أحداث الأزرار
        function setupButtonsEvents() {
            // زر تحديث البيانات
            $("#refresh-data").on("click", function() {
                console.log("تحديث بيانات التقارير");
                // إظهار مؤشر التحميل
                $(this).html('<i class="fas fa-spinner fa-spin"></i>');
                
                // إعادة تحميل البيانات
                setTimeout(function() {
                    loadReportsData();
                    $("#refresh-data").html('<i class="fas fa-sync-alt"></i>');
                }, 1000);
            });
            
            // زر إعدادات التقارير
            $("#report-settings").on("click", function() {
                console.log("فتح إعدادات التقارير");
                // هنا سيتم فتح مربع حوار الإعدادات
                alert("سيتم فتح إعدادات التقارير");
            });
            
            // تغيير ترتيب التقارير
            $("#sort-by").on("change", function() {
                const sortBy = $(this).val();
                sortReports(sortBy);
            });
        }

        // تحميل بيانات التقارير
        function loadReportsData() {
            console.log("تحميل بيانات التقارير");
            
            // في البيئة الحقيقية: استدعاء API للحصول على بيانات التقارير
            // هنا نستخدم بيانات تجريبية فقط للعرض
            
            // تحديث العدادات
            updateReportCounters();
        }

        // تحديث عدادات التقارير
        function updateReportCounters() {
            // في البيئة الحقيقية: تحديث العدادات من البيانات التي تم استلامها من API
            // هنا نستخدم بيانات تجريبية للعرض

            // عشوائية بسيطة للعرض التجريبي
            const randomFactor = Math.floor(Math.random() * 5);
            
            $("#total-reports").text(15 + randomFactor);
            $("#new-reports").text(3 + Math.floor(randomFactor / 2));
            $("#exported-reports").text(7 + Math.floor(randomFactor / 3));
            
            const perfIndex = 90 + randomFactor;
            $("#performance-index").text(perfIndex + "%");
            
            // تغيير لون مؤشر الأداء حسب القيمة
            if (perfIndex < 85) {
                $("#performance-index").removeClass("text-success text-warning text-danger").addClass("text-danger");
            } else if (perfIndex < 95) {
                $("#performance-index").removeClass("text-success text-warning text-danger").addClass("text-warning");
            } else {
                $("#performance-index").removeClass("text-success text-warning text-danger").addClass("text-success");
            }
        }

        // ترتيب التقارير
        function sortReports(sortBy) {
            console.log("ترتيب التقارير حسب:", sortBy);
            
            // في البيئة الحقيقية: إعادة ترتيب القائمة حسب المعيار المحدد
            // هنا نستخدم تأثير مرئي بسيط للعرض
            
            $("#reports-list").fadeOut(200, function() {
                // هنا سيتم ترتيب العناصر في البيئة الحقيقية
                // للعرض فقط نعيد ظهور القائمة
                $(this).fadeIn(200);
            });
        }
    </script>
</body>
</html>
