# دليل المسؤول لنظام الإشعارات

## مقدمة

هذا الدليل مخصص للمديرين والمسؤولين في نظام التسويق العقاري. يشرح كيفية إدارة وتهيئة نظام الإشعارات، وإعداد قوالب الإشعارات، وتخصيص إعدادات النظام حسب متطلبات المؤسسة.

## لوحة تحكم المسؤول

### الوصول إلى لوحة التحكم

يمكن الوصول إلى لوحة تحكم الإشعارات من خلال:

1. تسجيل الدخول كمستخدم بصلاحيات المسؤول
2. الانتقال إلى "الإعدادات" > "إدارة النظام" > "إعدادات الإشعارات"

### المميزات الأساسية

تتيح لوحة تحكم المسؤول المميزات التالية:

- **إدارة أنواع الإشعارات**: إضافة أو تعديل أو تعطيل أنواع الإشعارات
- **إعداد قوالب الإشعارات**: تخصيص نص وتنسيق الإشعارات
- **تهيئة القواعد والمشغلات**: تحديد متى وكيف يتم إرسال الإشعارات
- **إدارة مجموعات المستخدمين**: تحديد من يتلقى أي نوع من الإشعارات
- **سجلات النظام**: مراقبة وتتبع إرسال الإشعارات وتفاعلات المستخدمين

## تهيئة أنواع الإشعارات

### أنواع الإشعارات الافتراضية

النظام يأتي مع الأنواع الافتراضية التالية:

1. **معلومات (INFO)**: إشعارات عامة للمعلومات
2. **نجاح (SUCCESS)**: إشعارات لإتمام العمليات بنجاح
3. **تحذير (WARNING)**: تنبيهات بشأن المشكلات المحتملة
4. **خطر (DANGER)**: تنبيهات عاجلة للمشكلات الحرجة
5. **مهمة (TASK)**: إشعارات متعلقة بالمهام والواجبات
6. **موعد (MEETING)**: إشعارات متعلقة بالمواعيد والأحداث
7. **تنبيه (ALERT)**: تنبيهات النظام المهمة

### إضافة نوع إشعار جديد

لإضافة نوع إشعار جديد:

1. انتقل إلى "إعدادات الإشعارات" > "أنواع الإشعارات"
2. انقر على "إضافة نوع جديد"
3. املأ الحقول المطلوبة:
   - **المعرف**: معرف فريد للنوع (مثل: PROMOTION)
   - **الاسم**: اسم عرض النوع (مثل: "عرض ترويجي")
   - **الوصف**: وصف موجز للنوع
   - **الرمز**: رمز Font Awesome (مثل: fa-tag)
   - **اللون**: لون الإشعار
   - **الأولوية الافتراضية**: أولوية افتراضية لهذا النوع
4. انقر على "حفظ"

### تعديل أنواع الإشعارات

يمكن تعديل أي نوع من أنواع الإشعارات باستثناء المعرف الخاص به:

1. انتقل إلى "إعدادات الإشعارات" > "أنواع الإشعارات"
2. انقر على زر التعديل بجانب النوع المطلوب
3. قم بتعديل الحقول المطلوبة
4. انقر على "حفظ"

## إدارة قوالب الإشعارات

قوالب الإشعارات تحدد كيفية عرض الإشعارات للمستخدمين.

### إنشاء قالب جديد

1. انتقل إلى "إعدادات الإشعارات" > "قوالب الإشعارات"
2. انقر على "إضافة قالب جديد"
3. املأ الحقول التالية:
   - **المعرف**: معرف فريد للقالب
   - **الاسم**: اسم وصفي للقالب
   - **نوع الإشعار**: نوع الإشعار المرتبط
   - **عنوان القالب**: نموذج عنوان الإشعار (يدعم متغيرات النظام)
   - **محتوى القالب**: نموذج محتوى الإشعار (يدعم متغيرات النظام والتنسيق)
   - **رابط افتراضي**: نموذج الرابط الافتراضي (اختياري)
   - **تاريخ انتهاء افتراضي**: نموذج تاريخ انتهاء الصلاحية (عدد الأيام)
4. انقر على "حفظ"

### متغيرات النظام المدعومة

يمكن استخدام المتغيرات التالية في قوالب الإشعارات:

- `{{user.name}}`: اسم المستخدم
- `{{user.id}}`: معرف المستخدم
- `{{item.name}}`: اسم العنصر (عميل، مهمة، موعد، إلخ)
- `{{item.id}}`: معرف العنصر
- `{{item.date}}`: تاريخ العنصر
- `{{item.time}}`: وقت العنصر
- `{{sender.name}}`: اسم مرسل الإشعار
- `{{date.now}}`: التاريخ الحالي
- `{{date.tomorrow}}`: تاريخ الغد
- `{{date.next_week}}`: تاريخ الأسبوع القادم

### مثال على قالب إشعار موعد

```
عنوان القالب:
موعد جديد: {{item.name}}

محتوى القالب:
تم تحديد موعد جديد بتاريخ {{item.date}} الساعة {{item.time}} مع {{item.client_name}}.
{{#if item.location}}
المكان: {{item.location}}
{{/if}}

رابط افتراضي:
../schedule/calendar-view.html?date={{item.date}}

تاريخ انتهاء افتراضي:
{{item.date}}
```

## إعداد قواعد ومشغلات الإشعارات

المشغلات تحدد متى يتم إنشاء وإرسال الإشعارات تلقائيًا.

### إنشاء مشغل جديد

1. انتقل إلى "إعدادات الإشعارات" > "مشغلات الإشعارات"
2. انقر على "إضافة مشغل جديد"
3. املأ الحقول التالية:
   - **الاسم**: اسم وصفي للمشغل
   - **الوصف**: وصف موجز للمشغل
   - **الحدث**: الحدث الذي يشغل الإشعار (مثل: إنشاء موعد جديد)
   - **شروط**: شروط تشغيل الإشعار (اختياري)
   - **قالب الإشعار**: القالب المستخدم للإشعار
   - **المستقبلون**: من سيتلقى الإشعار
   - **قنوات الإرسال**: كيف سيتم إرسال الإشعار (تطبيق، بريد إلكتروني، SMS)
4. انقر على "حفظ"

### مثال لمشغل موعد

```
الاسم: إشعار موعد جديد
الوصف: إشعار يرسل عند إنشاء موعد جديد
الحدث: appointment.created
شروط: الموعد في غضون 48 ساعة
قالب الإشعار: new_appointment_template
المستقبلون: [المسؤول عن الموعد، العميل، مدير المبيعات]
قنوات الإرسال: [تطبيق، بريد إلكتروني]
```

## إدارة مجموعات المستخدمين

تحدد من يتلقى أي نوع من الإشعارات.

### إنشاء مجموعة مستخدمين

1. انتقل إلى "إعدادات الإشعارات" > "مجموعات المستقبلين"
2. انقر على "إضافة مجموعة جديدة"
3. املأ الحقول التالية:
   - **الاسم**: اسم المجموعة
   - **الوصف**: وصف المجموعة
   - **المستخدمون**: قائمة المستخدمين في المجموعة
   - **الأدوار**: قائمة الأدوار التي تنتمي تلقائيًا للمجموعة
4. انقر على "حفظ"

### تعيين أذونات الإشعارات للمجموعات

1. انتقل إلى "إعدادات الإشعارات" > "أذونات الإشعارات"
2. حدد مجموعة المستخدمين
3. حدد أنواع الإشعارات التي يمكن للمجموعة تلقيها
4. حدد قنوات الإرسال لكل نوع إشعار
5. انقر على "حفظ"

## سجلات وإحصائيات النظام

### عرض سجلات الإشعارات

1. انتقل إلى "إعدادات الإشعارات" > "سجلات الإشعارات"
2. استخدم المرشحات لتصفية السجلات حسب:
   - نطاق التاريخ
   - نوع الإشعار
   - حالة التسليم
   - المستلمين
3. انقر على "تصدير" لتنزيل السجلات بتنسيق CSV أو Excel

### إحصائيات الإشعارات

توفر لوحة الإحصائيات معلومات حول:

- عدد الإشعارات المرسلة يوميًا/أسبوعيًا/شهريًا
- معدلات النقر والتفاعل
- نسب القراءة والإجراءات
- أوقات الذروة لإرسال الإشعارات
- توزيع الإشعارات حسب النوع والأولوية

## أفضل الممارسات

### تصميم الإشعارات

- اجعل العناوين قصيرة وواضحة
- استخدم المحتوى بحكمة وتجنب الإطالة
- تأكد من أن الإشعارات توفر إجراءات واضحة

### عدد الإشعارات

- تجنب إرسال الكثير من الإشعارات
- دمج الإشعارات المتشابهة عندما يكون ذلك منطقيًا
- استخدم الأولويات بحكمة

### خصوصية البيانات

- تأكد من عدم تضمين معلومات حساسة في نص الإشعار
- قيّد الوصول إلى سجلات الإشعارات
- تأكد من الامتثال للوائح حماية البيانات المعمول بها

## استكشاف الأخطاء وإصلاحها

### مشكلات شائعة

1. **الإشعارات لا تصل للمستخدمين**:
   - تحقق من أذونات المجموعة
   - تأكد من تفعيل المشغلات
   - تحقق من إعدادات قنوات الإرسال

2. **تنسيق الإشعارات غير صحيح**:
   - تحقق من بناء الجملة في قوالب الإشعارات
   - تأكد من توفر جميع المتغيرات المستخدمة

3. **بطء في إرسال الإشعارات**:
   - راجع عدد المشغلات النشطة
   - تحقق من أداء قاعدة البيانات
   - تأكد من عدم وجود تأخير في خدمات البريد الإلكتروني

### كيفية الإبلاغ عن الأخطاء

إذا واجهت مشكلات في نظام الإشعارات، يرجى الإبلاغ عنها من خلال:

1. التقاط لقطة شاشة للمشكلة
2. نسخ أي رسائل خطأ
3. وصف الخطوات التي أدت إلى المشكلة
4. إرسال التفاصيل إلى فريق الدعم عبر portal.support@realestate.example.com

## الدعم والمساعدة

للحصول على مساعدة إضافية في إدارة نظام الإشعارات:

- **وثائق المسؤول الكاملة**: متوفرة على بوابة المسؤول
- **جلسات تدريبية**: يتم تقديمها شهريًا لمسؤولي النظام
- **دعم مباشر**: متاح من خلال نظام تذاكر الدعم
- **منتدى المسؤولين**: للتواصل مع مسؤولين آخرين وتبادل أفضل الممارسات
