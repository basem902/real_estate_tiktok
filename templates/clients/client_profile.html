{% extends 'base.html' %}

{% block title %}الملف الشخصي - العميل{% endblock %}

{% block styles %}
<style>
    :root {
        --primary-color: #0056b3;
        --primary-dark: #004494;
        --primary-light: #e6f0ff;
        --primary-rgb: 0, 86, 179;
        --text-color: #000000;
        --text-secondary: #333333;
        --text-tertiary: #555555;
        --card-bg: #ffffff;
        --border-color: #e0e0e0;
        --box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        --card-border-radius: 8px;
        --input-border-radius: 6px;
    }
    
    body {
        font-family: 'Segoe UI', 'Arial', sans-serif !important;
        font-size: 20px !important;
        color: #000000 !important;
        font-weight: 700 !important;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        line-height: 1.6;
    }
    
    /* تكبير النص في الصفحة الرئيسية مع تجاوز الأنماط */
    .main-content p, p, div, span, li, td, th {
        font-size: 22px !important;
        line-height: 1.8 !important;
        color: #000000 !important;
        font-weight: 700 !important;
    }
    
    /* تحسين عناوين الصفحة */
    h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
        color: #0056b3 !important;
        font-weight: 900 !important;
        letter-spacing: 0.5px !important;
        margin-bottom: 20px !important;
        line-height: 1.4 !important;
    }
    
    h1, .h1 {
        font-size: 42px !important;
    }
    
    h2, .h2 {
        font-size: 36px !important;
    }
    
    h3, .h3 {
        font-size: 28px !important;
    }
    
    /* تحسين الملف الشخصي */
    .profile-name, .card-title {
        font-size: 36px !important;
        font-weight: 900 !important;
        color: #0056b3 !important;
        margin-bottom: 15px !important;
        text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.1) !important;
    }
    
    .profile-role {
        font-size: 24px !important;
        font-weight: 700 !important;
        color: #000000 !important;
        margin-bottom: 25px !important;
    }
    
    /* تحسين الإحصائيات مع تجاوز جميع الأنماط */
    .stat-value {
        font-size: 38px !important;
        font-weight: 900 !important;
        color: #0056b3 !important;
        margin-bottom: 8px !important;
        text-shadow: 1px 1px 0px rgba(0, 0, 0, 0.05) !important;
    }
    
    .stat-label {
        font-size: 20px !important;
        font-weight: 700 !important;
        color: #000000 !important;
    }
    
    /* تحسين التبويبات مع تجاوز جميع الأنماط */
    .nav-tabs {
        border-bottom: 3px solid #0056b3 !important;
    }
    
    .nav-tabs .nav-link {
        font-size: 22px !important;
        font-weight: 800 !important;
        padding: 15px 25px !important;
        color: #333333 !important;
        border: 2px solid transparent !important;
        border-radius: 8px 8px 0 0 !important;
        margin-right: 5px !important;
    }
    
    .nav-tabs .nav-link.active {
        color: white !important;
        background-color: #0056b3 !important;
        border-color: #0056b3 !important;
        font-weight: 900 !important;
    }
    
    .nav-tabs .nav-link:hover:not(.active) {
        background-color: #e6f0ff !important;
        color: #0056b3 !important;
        border-color: #0056b3 !important;
    }
    
    /* تحسين بطاقات العقارات */
    .property-title {
        font-size: 26px !important;
        font-weight: 900 !important;
        color: #0056b3 !important;
        margin-bottom: 15px !important;
        line-height: 1.4 !important;
    }
    
    .property-location {
        font-size: 20px !important;
        font-weight: 700 !important;
        color: #000000 !important;
        margin-bottom: 15px !important;
    }
    
    .property-price {
        font-size: 26px !important;
        font-weight: 900 !important;
        color: #0056b3 !important;
        background-color: #e6f0ff !important;
        padding: 8px 15px !important;
        border-radius: 6px !important;
        display: inline-block !important;
    }
    
    .spec-value {
        font-size: 24px !important;
        font-weight: 900 !important;
        color: #0056b3 !important;
    }
    
    .spec-label {
        font-size: 18px !important;
        font-weight: 700 !important;
        color: #000000 !important;
    }
    
    /* تحسين قسم النشاط */
    #activity .timeline-date {
        font-size: 26px !important;
        font-weight: 900 !important;
        color: #0056b3 !important;
        margin-bottom: 15px !important;
        padding-bottom: 8px !important;
        border-bottom: 2px solid #0056b3 !important;
    }
    
    #activity .activity-title {
        font-size: 22px !important;
        font-weight: 800 !important;
        color: #0056b3 !important;
    }
    
    #activity .activity-subtitle {
        font-size: 20px !important;
        font-weight: 700 !important;
        color: #000000 !important;
    }
    
    #activity .activity-time {
        font-size: 18px !important;
        font-weight: 700 !important;
        color: #555555 !important;
    }
    
    /* تحسين قسم الإعدادات */
    #settings .card-title {
        font-size: 32px !important;
        font-weight: 900 !important;
        color: #0056b3 !important;
        margin-bottom: 25px !important;
        padding-bottom: 10px !important;
        border-bottom: 3px solid #0056b3 !important;
    }
    
    #settings .settings-section-title {
        font-size: 26px !important;
        font-weight: 900 !important;
        color: #0056b3 !important;
        margin-bottom: 20px !important;
        padding-bottom: 10px !important;
        border-bottom: 2px solid #0056b3 !important;
    }
    
    #settings .form-label {
        font-size: 20px !important;
        font-weight: 700 !important;
        color: #000000 !important;
        margin-bottom: 10px !important;
    }
    
    #settings .form-control, 
    #settings .form-select {
        font-size: 18px !important;
        font-weight: 600 !important;
        padding: 12px 15px !important;
        border: 2px solid #cccccc !important;
        border-radius: 8px !important;
    }
    
    #settings .form-control:focus, 
    #settings .form-select:focus {
        border-color: #0056b3 !important;
        box-shadow: 0 0 0 3px rgba(0, 86, 179, 0.25) !important;
    }
    
    #settings .form-check-label {
        font-size: 20px !important;
        font-weight: 700 !important;
        color: #000000 !important;
    }
    
    /* أزرار بلون أزرق */
    .btn-primary {
        background-color: #0056b3 !important;
        border-color: #0056b3 !important;
        font-weight: 700 !important;
        font-size: 18px !important;
        padding: 10px 20px !important;
        border-radius: 6px !important;
        box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1) !important;
    }
    
    .btn-primary:hover {
        background-color: #004494 !important;
        border-color: #004494 !important;
        transform: translateY(-2px) !important;
        box-shadow: 0 5px 12px rgba(0, 0, 0, 0.15) !important;
    }
    
    /* تحسين البطاقات وإضافة تأثيرات زرقاء مع تجاوز الأنماط */
    .card {
        background-color: #ffffff !important;
        border: none !important;
        border-radius: 10px !important;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1) !important;
        overflow: hidden !important;
        margin-bottom: 25px !important;
        border-top: 4px solid #0056b3 !important;
    }
    
    .card:hover {
        box-shadow: 0 8px 25px rgba(0, 86, 179, 0.15) !important;
        transform: translateY(-5px) !important;
    }
    
    .card-header {
        background-color: #e6f0ff !important;
        border-bottom: 2px solid #0056b3 !important;
        padding: 15px 20px !important;
        font-size: 22px !important;
        font-weight: 800 !important;
        color: #0056b3 !important;
    }
    
    .card-body {
        padding: 20px !important;
    }
    
    /* تأكيد أن التغييرات تُطبق على العناصر الرئيسية للصفحة */
    #mainContent {
        font-size: 22px !important;
        color: #000000 !important;
        font-weight: 700 !important;
    }
    
    .profile-header {
        background-color: #ffffff !important;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15) !important;
    }
    
    .profile-info {
        color: #000000 !important;
        font-weight: 700 !important;
    }
    
    .property-image img {
        border-radius: 8px 8px 0 0 !important;
    }
    
    /* تضمين css بخصائص مهمة للتأكد من تطبيق التغييرات */
    * {
        font-family: 'Segoe UI', 'Arial', sans-serif !important;
    }
</style>
{% endblock %}

{% block content %}
<!-- طبقة التغطية للشاشات الصغيرة -->
<div class="overlay" id="overlay"></div>

{% include 'clients/client_sidebar.html' %}

<div class="main-content" id="mainContent">
    <!-- رأس الملف الشخصي -->
    <div class="profile-header">
        <div class="profile-cover" style="background-image: url('https://images.unsplash.com/photo-1560518883-ce09059eeffa?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80');"></div>
        <div class="profile-info">
            <div class="profile-avatar">
                <img src="https://randomuser.me/api/portraits/men/44.jpg" alt="صورة المستخدم" id="userAvatar">
            </div>
            <div class="profile-details">
                <h2 class="profile-name">أحمد محمد علي</h2>
                <p class="profile-role">عميل منذ يناير 2023</p>
                <div class="profile-stats">
                    <div class="stat-item">
                        <div class="stat-value">15</div>
                        <div class="stat-label">العقارات</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">8</div>
                        <div class="stat-label">المفضلة</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">3</div>
                        <div class="stat-label">الزيارات</div>
                    </div>
                </div>
            </div>
            <!-- إضافة زر تعديل الملف الشخصي -->
            <div class="profile-actions">
                <button class="btn btn-outline-primary btn-sm" id="editProfileBtn">
                    <i class="fas fa-edit ml-1"></i> تعديل الملف
                </button>
            </div>
        </div>
    </div>
    
    <!-- إضافة قسم جديد للمعلومات الشخصية -->
    <div class="card mb-3 section-spacing">
        <div class="card-body">
            <h5 class="card-title mb-3"><i class="fas fa-user-circle ml-2"></i> المعلومات الشخصية</h5>
            <div class="row">
                <div class="col-md-6 mb-2">
                    <div class="personal-info-item">
                        <span class="info-label"><i class="fas fa-envelope ml-1"></i> البريد الإلكتروني:</span>
                        <span class="info-value">ahmed.ali@example.com</span>
                    </div>
                </div>
                <div class="col-md-6 mb-2">
                    <div class="personal-info-item">
                        <span class="info-label"><i class="fas fa-phone ml-1"></i> رقم الهاتف:</span>
                        <span class="info-value">+966 50 123 4567</span>
                    </div>
                </div>
                <div class="col-md-6 mb-2">
                    <div class="personal-info-item">
                        <span class="info-label"><i class="fas fa-map-marker-alt ml-1"></i> المدينة:</span>
                        <span class="info-value">الرياض</span>
                    </div>
                </div>
                <div class="col-md-6 mb-2">
                    <div class="personal-info-item">
                        <span class="info-label"><i class="fas fa-calendar-alt ml-1"></i> تاريخ التسجيل:</span>
                        <span class="info-value">05/01/2023</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- تبويبات الملف الشخصي -->
    <div class="profile-tabs">
        <nav>
            <div class="nav nav-tabs" id="profileTabs" role="tablist">
                <button class="nav-link active" id="properties-tab" data-bs-toggle="tab" data-bs-target="#properties" type="button" role="tab" aria-controls="properties" aria-selected="true">
                    <i class="fas fa-home"></i> عقاراتي
                </button>
                <button class="nav-link" id="saved-tab" data-bs-toggle="tab" data-bs-target="#saved" type="button" role="tab" aria-controls="saved" aria-selected="false">
                    <i class="fas fa-bookmark"></i> المفضلة
                </button>
                <button class="nav-link" id="activity-tab" data-bs-toggle="tab" data-bs-target="#activity" type="button" role="tab" aria-controls="activity" aria-selected="false">
                    <i class="fas fa-bell"></i> النشاط
                </button>
                <button class="nav-link" id="settings-tab" data-bs-toggle="tab" data-bs-target="#settings" type="button" role="tab" aria-controls="settings" aria-selected="false">
                    <i class="fas fa-cog"></i> الإعدادات
                </button>
            </div>
        </nav>
    </div>
    
    <!-- محتوى التبويبات -->
    <div class="tab-content" id="profileTabsContent">
        <!-- تبويب العقارات -->
        <div class="tab-pane fade show active" id="properties" role="tabpanel" aria-labelledby="properties-tab">
            <div class="row">
                <div class="col-md-4 mb-4">
                    <div class="card property-card">
                        <div class="property-image">
                            <div class="img-loading-skeleton"></div>
                            <img src="https://images.unsplash.com/photo-1580587771525-78b9dba3b914?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="عقار فاخر" loading="lazy" class="property-img" onload="this.parentElement.querySelector('.img-loading-skeleton').style.display='none';">
                            <div class="property-type">فيلا</div>
                            <div class="property-badge">جديد</div>
                        </div>
                        <div class="property-content">
                            <h3 class="property-title">فيلا فاخرة مع مسبح خاص</h3>
                            <div class="property-location">
                                <i class="fas fa-map-marker-alt"></i>
                                <span>حي النخيل، الرياض</span>
                            </div>
                            <div class="property-specs">
                                <div class="spec-item">
                                    <div class="spec-value">5</div>
                                    <div class="spec-label">غرف</div>
                                </div>
                                <div class="spec-item">
                                    <div class="spec-value">4</div>
                                    <div class="spec-label">حمامات</div>
                                </div>
                                <div class="spec-item">
                                    <div class="spec-value">450 م²</div>
                                    <div class="spec-label">مساحة</div>
                                </div>
                            </div>
                            <div class="property-price">
                                3,500,000 ريال
                            </div>
                        </div>
                        <div class="property-footer">
                            <div class="property-posted">تم النشر منذ 3 أيام</div>
                            <div class="property-actions">
                                <button class="btn btn-light" title="مشاركة"><i class="fas fa-share-alt"></i></button>
                                <button class="btn btn-light favorited" title="حفظ"><i class="fas fa-heart"></i></button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-4 mb-4">
                    <div class="card property-card">
                        <div class="property-image">
                            <div class="img-loading-skeleton"></div>
                            <img src="https://images.unsplash.com/photo-1512917774080-9991f1c4c750?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="شقة فاخرة" loading="lazy" class="property-img" onload="this.parentElement.querySelector('.img-loading-skeleton').style.display='none';">
                            <div class="property-type">شقة</div>
                        </div>
                        <div class="property-content">
                            <h3 class="property-title">شقة فاخرة في برج سكني</h3>
                            <div class="property-location">
                                <i class="fas fa-map-marker-alt"></i>
                                <span>حي العليا، الرياض</span>
                            </div>
                            <div class="property-specs">
                                <div class="spec-item">
                                    <div class="spec-value">3</div>
                                    <div class="spec-label">غرف</div>
                                </div>
                                <div class="spec-item">
                                    <div class="spec-value">2</div>
                                    <div class="spec-label">حمامات</div>
                                </div>
                                <div class="spec-item">
                                    <div class="spec-value">180 م²</div>
                                    <div class="spec-label">مساحة</div>
                                </div>
                            </div>
                            <div class="property-price">
                                1,200,000 ريال
                            </div>
                        </div>
                        <div class="property-footer">
                            <div class="property-posted">تم النشر منذ أسبوع</div>
                            <div class="property-actions">
                                <button class="btn btn-light" title="مشاركة"><i class="fas fa-share-alt"></i></button>
                                <button class="btn btn-light" title="حفظ"><i class="fas fa-heart"></i></button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-4 mb-4">
                    <div class="card property-card">
                        <div class="property-image">
                            <div class="img-loading-skeleton"></div>
                            <img src="https://images.unsplash.com/photo-1560518883-ce09059eeffa?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="فلة مع حديقة" loading="lazy" class="property-img" onload="this.parentElement.querySelector('.img-loading-skeleton').style.display='none';">
                            <div class="property-type">فيلا</div>
                            <div class="property-badge">حصري</div>
                        </div>
                        <div class="property-content">
                            <h3 class="property-title">فيلا فاخرة مع حديقة واسعة</h3>
                            <div class="property-location">
                                <i class="fas fa-map-marker-alt"></i>
                                <span>حي الياسمين، الرياض</span>
                            </div>
                            <div class="property-specs">
                                <div class="spec-item">
                                    <div class="spec-value">4</div>
                                    <div class="spec-label">غرف</div>
                                </div>
                                <div class="spec-item">
                                    <div class="spec-value">3</div>
                                    <div class="spec-label">حمامات</div>
                                </div>
                                <div class="spec-item">
                                    <div class="spec-value">320 م²</div>
                                    <div class="spec-label">مساحة</div>
                                </div>
                            </div>
                            <div class="property-price">
                                2,800,000 ريال
                            </div>
                        </div>
                        <div class="property-footer">
                            <div class="property-posted">تم النشر منذ 5 أيام</div>
                            <div class="property-actions">
                                <button class="btn btn-light" title="مشاركة"><i class="fas fa-share-alt"></i></button>
                                <button class="btn btn-light" title="حفظ"><i class="fas fa-heart"></i></button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="row mt-2">
                <!-- محتوى إضافي للعقارات يمكن إضافته هنا -->
            </div>
        </div>
        
        <!-- تبويب المفضلة -->
        <div class="tab-pane fade" id="saved" role="tabpanel" aria-labelledby="saved-tab">
            <div class="row">
                <div class="col-md-4 mb-4">
                    <div class="card property-card">
                        <div class="property-image">
                            <div class="img-loading-skeleton"></div>
                            <img src="https://images.unsplash.com/photo-1493809842364-78817add7ffb?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="شقة مفروشة" loading="lazy" class="property-img" onload="this.parentElement.querySelector('.img-loading-skeleton').style.display='none';">
                            <div class="property-type">شقة</div>
                            <div class="property-badge">مميز</div>
                        </div>
                        <div class="property-content">
                            <h3 class="property-title">شقة مفروشة في حي النخيل</h3>
                            <div class="property-location">
                                <i class="fas fa-map-marker-alt"></i>
                                <span>حي النخيل، الرياض</span>
                            </div>
                            <div class="property-specs">
                                <div class="spec-item">
                                    <div class="spec-value">2</div>
                                    <div class="spec-label">غرف</div>
                                </div>
                                <div class="spec-item">
                                    <div class="spec-value">1</div>
                                    <div class="spec-label">حمامات</div>
                                </div>
                                <div class="spec-item">
                                    <div class="spec-value">120 م²</div>
                                    <div class="spec-label">مساحة</div>
                                </div>
                            </div>
                            <div class="property-price">
                                850,000 ريال
                            </div>
                        </div>
                        <div class="property-footer">
                            <div class="property-posted">أضيف للمفضلة منذ 2 يوم</div>
                            <div class="property-actions">
                                <button class="btn btn-light" title="مشاركة"><i class="fas fa-share-alt"></i></button>
                                <button class="btn btn-light favorited" title="حفظ"><i class="fas fa-heart"></i></button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-4 mb-4">
                    <div class="card property-card">
                        <div class="property-image">
                            <div class="img-loading-skeleton"></div>
                            <img src="https://images.unsplash.com/photo-1600607687920-4e2a09cf159d?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="فيلا حديثة" loading="lazy" class="property-img" onload="this.parentElement.querySelector('.img-loading-skeleton').style.display='none';">
                            <div class="property-type">فيلا</div>
                        </div>
                        <div class="property-content">
                            <h3 class="property-title">فيلا حديثة في حي الملقا</h3>
                            <div class="property-location">
                                <i class="fas fa-map-marker-alt"></i>
                                <span>حي الملقا، الرياض</span>
                            </div>
                            <div class="property-specs">
                                <div class="spec-item">
                                    <div class="spec-value">5</div>
                                    <div class="spec-label">غرف</div>
                                </div>
                                <div class="spec-item">
                                    <div class="spec-value">4</div>
                                    <div class="spec-label">حمامات</div>
                                </div>
                                <div class="spec-item">
                                    <div class="spec-value">400 م²</div>
                                    <div class="spec-label">مساحة</div>
                                </div>
                            </div>
                            <div class="property-price">
                                3,200,000 ريال
                            </div>
                        </div>
                        <div class="property-footer">
                            <div class="property-posted">أضيف للمفضلة منذ أسبوع</div>
                            <div class="property-actions">
                                <button class="btn btn-light" title="مشاركة"><i class="fas fa-share-alt"></i></button>
                                <button class="btn btn-light favorited" title="حفظ"><i class="fas fa-heart"></i></button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- تبويب النشاط -->
        <div class="tab-pane fade" id="activity" role="tabpanel" aria-labelledby="activity-tab">
            <div class="card mb-3">
                <div class="card-body">
                    <h5 class="card-title mb-3">سجل النشاط</h5>
                    <div class="timeline">
                        <div class="timeline-item">
                            <div class="timeline-date">اليوم</div>
                            <div class="timeline-content">
                                <div class="activity-card">
                                    <div class="activity-icon bg-primary">
                                        <i class="fas fa-eye"></i>
                                    </div>
                                    <div class="activity-details">
                                        <div class="activity-title">زيارة عقار</div>
                                        <div class="activity-subtitle">قمت بزيارة فيلا فاخرة في حي الياسمين</div>
                                        <div class="activity-time">منذ 3 ساعات</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="timeline-item">
                            <div class="timeline-date">أمس</div>
                            <div class="timeline-content">
                                <div class="activity-card">
                                    <div class="activity-icon bg-success">
                                        <i class="fas fa-heart"></i>
                                    </div>
                                    <div class="activity-details">
                                        <div class="activity-title">إضافة للمفضلة</div>
                                        <div class="activity-subtitle">أضفت شقة مفروشة في حي النخيل للمفضلة</div>
                                        <div class="activity-time">01 أبريل، 10:30 صباحاً</div>
                                    </div>
                                </div>
                                
                                <div class="activity-card mt-3">
                                    <div class="activity-icon bg-info">
                                        <i class="fas fa-search"></i>
                                    </div>
                                    <div class="activity-details">
                                        <div class="activity-title">بحث جديد</div>
                                        <div class="activity-subtitle">بحثت عن "فيلا في شمال الرياض"</div>
                                        <div class="activity-time">01 أبريل، 09:15 صباحاً</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="timeline-item">
                            <div class="timeline-date">الأسبوع الماضي</div>
                            <div class="timeline-content">
                                <div class="activity-card">
                                    <div class="activity-icon bg-warning">
                                        <i class="fas fa-comment"></i>
                                    </div>
                                    <div class="activity-details">
                                        <div class="activity-title">تعليق جديد</div>
                                        <div class="activity-subtitle">علقت على عقار "فيلا حديثة في حي الملقا"</div>
                                        <div class="activity-time">29 مارس، 11:45 صباحاً</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- تبويب الإعدادات -->
        <div class="tab-pane fade" id="settings" role="tabpanel" aria-labelledby="settings-tab">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title mb-4">إعدادات الحساب</h5>
                    
                    <form>
                        <div class="mb-4">
                            <h6 class="settings-section-title">المعلومات الشخصية</h6>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="fullName" class="form-label">الاسم الكامل</label>
                                    <input type="text" class="form-control" id="fullName" value="أحمد محمد علي">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="email" class="form-label">البريد الإلكتروني</label>
                                    <input type="email" class="form-control" id="email" value="ahmed.ali@example.com">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="phone" class="form-label">رقم الهاتف</label>
                                    <input type="tel" class="form-control" id="phone" value="+966 50 123 4567">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="city" class="form-label">المدينة</label>
                                    <select class="form-select" id="city">
                                        <option value="riyadh" selected>الرياض</option>
                                        <option value="jeddah">جدة</option>
                                        <option value="dammam">الدمام</option>
                                        <option value="makkah">مكة المكرمة</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-4">
                            <h6 class="settings-section-title">إعدادات الإشعارات</h6>
                            <div class="form-check form-switch mb-2">
                                <input class="form-check-input" type="checkbox" id="emailNotif" checked>
                                <label class="form-check-label" for="emailNotif">إشعارات البريد الإلكتروني</label>
                            </div>
                            <div class="form-check form-switch mb-2">
                                <input class="form-check-input" type="checkbox" id="smsNotif">
                                <label class="form-check-label" for="smsNotif">إشعارات الرسائل النصية</label>
                            </div>
                            <div class="form-check form-switch mb-2">
                                <input class="form-check-input" type="checkbox" id="newPropertyNotif" checked>
                                <label class="form-check-label" for="newPropertyNotif">إشعارات العقارات الجديدة</label>
                            </div>
                        </div>
                        
                        <div class="mb-4">
                            <h6 class="settings-section-title">إعدادات التطبيق</h6>
                            <div class="form-check form-switch mb-2">
                                <input class="form-check-input" type="checkbox" id="darkMode">
                                <label class="form-check-label" for="darkMode">الوضع الداكن</label>
                            </div>
                            <div class="form-check form-switch mb-2">
                                <input class="form-check-input" type="checkbox" id="saveHistory" checked>
                                <label class="form-check-label" for="saveHistory">حفظ سجل البحث</label>
                            </div>
                        </div>
                        
                        <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                            <button type="button" class="btn btn-light">إلغاء</button>
                            <button type="button" class="btn btn-primary">حفظ التغييرات</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- زر العائم للشاشات الصغيرة -->
<div class="floating-button" id="menuToggle">
    <i class="fas fa-bars"></i>
</div>

<!-- سكريبت تفعيل وظائف الصفحة -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    const overlay = document.getElementById('overlay');
    const sidebar = document.querySelector('.sidebar');
    const menuToggle = document.getElementById('menuToggle');
    
    // التحقق من إعدادات الوضع المظلم
    function checkDarkMode() {
        if (localStorage.getItem('darkMode') === 'true') {
            document.documentElement.setAttribute('data-theme', 'dark');
        } else {
            document.documentElement.setAttribute('data-theme', 'light');
        }
    }
    
    // تفعيل التحقق عند التحميل
    checkDarkMode();
    
    // تبديل الشريط الجانبي
    function toggleSidebar() {
        sidebar.classList.toggle('active');
        overlay.style.display = sidebar.classList.contains('active') ? 'block' : 'none';
        document.body.style.overflow = sidebar.classList.contains('active') ? 'hidden' : 'auto';
    }
    
    // تحديث واجهة المستخدم للأجهزة المختلفة
    function updateUI() {
        if (window.innerWidth <= 991) {
            if (!menuToggle.getAttribute('listener')) {
                menuToggle.addEventListener('click', toggleSidebar);
                menuToggle.setAttribute('listener', 'true');
            }
        }
    }
    
    // استدعاء تحديث الواجهة عند تغيير حجم النافذة
    window.addEventListener('resize', updateUI);
    
    // تحديث الواجهة عند التحميل
    updateUI();
    
    // إضافة حدث النقر على الشاشة لإغلاق الشريط الجانبي
    overlay.addEventListener('click', toggleSidebar);
    
    // تحميل الصور بشكل أكثر كفاءة
    function lazyLoadImages() {
        const images = document.querySelectorAll('.property-img[loading="lazy"]');
        
        if ('IntersectionObserver' in window) {
            const imageObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const img = entry.target;
                        
                        // تعيين src للصورة إذا كان هناك data-src
                        if (img.dataset.src) {
                            img.src = img.dataset.src;
                        }
                        
                        // إضافة مستمع للحدث عند اكتمال التحميل
                        img.onload = function() {
                            // إخفاء skeleton loader
                            const skeleton = this.parentElement.querySelector('.img-loading-skeleton');
                            if (skeleton) {
                                skeleton.style.opacity = '0';
                                setTimeout(() => {
                                    skeleton.style.display = 'none';
                                }, 300);
                            }
                            // إظهار الصورة بتأثير التلاشي
                            this.style.opacity = '1';
                        };
                        
                        // عدم مراقبة هذه الصورة بعد الآن
                        observer.unobserve(img);
                    }
                });
            }, {
                rootMargin: '100px 0px'
            });
            
            images.forEach(img => {
                // إعداد الصور للتحميل الكسول
                img.style.opacity = '0';
                imageObserver.observe(img);
            });
        } else {
            // Fallback لحالة عدم دعم IntersectionObserver
            images.forEach(img => {
                if (img.dataset.src) {
                    img.src = img.dataset.src;
                }
            });
        }
    }
    
    // تشغيل lazy loading للصور
    lazyLoadImages();
    
    // تحسين تفاعل المستخدم مع البطاقات
    const propertyCards = document.querySelectorAll('.property-card');
    propertyCards.forEach(card => {
        card.addEventListener('click', function(e) {
            // تجنب تشغيل الحدث عند النقر على الأزرار
            if (!e.target.closest('.property-actions')) {
                // يمكن إضافة رابط لصفحة تفاصيل العقار هنا
                console.log('تم النقر على البطاقة:', this.querySelector('.property-title').textContent);
            }
        });
    });
    
    // أزرار الإجراءات لكل عقار
    const actionButtons = document.querySelectorAll('.property-actions .btn');
    actionButtons.forEach(btn => {
        btn.addEventListener('click', function(e) {
            e.stopPropagation(); // منع انتشار الحدث للبطاقة
            
            if (this.querySelector('.fa-heart')) {
                this.classList.toggle('favorited');
                if (this.classList.contains('favorited')) {
                    this.querySelector('i').className = 'fas fa-heart';
                } else {
                    this.querySelector('i').className = 'far fa-heart';
                }
            } else if (this.querySelector('.fa-share-alt')) {
                // تنفيذ المشاركة
                if (navigator.share) {
                    navigator.share({
                        title: 'مشاركة عقار',
                        text: this.closest('.property-card').querySelector('.property-title').textContent,
                        url: window.location.href,
                    })
                    .catch(console.error);
                } else {
                    alert('المشاركة غير مدعومة في متصفحك');
                }
            }
        });
    });
    
    // دعم وضع عدم الاتصال
    function updateOnlineStatus() {
        const statusElement = document.createElement('div');
        statusElement.className = 'connection-status';
        
        if (navigator.onLine) {
            statusElement.textContent = 'تم استعادة الاتصال بالإنترنت';
            statusElement.classList.add('online');
        } else {
            statusElement.textContent = 'أنت حالياً غير متصل بالإنترنت';
            statusElement.classList.add('offline');
        }
        
        document.body.appendChild(statusElement);
        
        setTimeout(() => {
            statusElement.classList.add('show');
            
            setTimeout(() => {
                statusElement.classList.remove('show');
                setTimeout(() => {
                    document.body.removeChild(statusElement);
                }, 300);
            }, 3000);
        }, 100);
    }
    
    window.addEventListener('online', updateOnlineStatus);
    window.addEventListener('offline', updateOnlineStatus);
    
    // دعم تطبيق الويب التقدمي (PWA)
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
            navigator.serviceWorker.register('/service-worker.js')
            .then(registration => {
                console.log('تم تسجيل Service Worker بنجاح:', registration.scope);
            })
            .catch(error => {
                console.log('فشل تسجيل Service Worker:', error);
            });
        });
    }
});
</script>
{% endblock %}
